var cov_1fl6jrtgkn=function(){var path='/Users/andeladeveloper/Documents/Projects/thorin-cfh/config/passport.js',hash='90107a0b91b7391c8ee988f3b37b26a688a722fa',Function=function(){}.constructor,global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/andeladeveloper/Documents/Projects/thorin-cfh/config/passport.js',statementMap:{'0':{start:{line:1,column:15},end:{line:1,column:34}},'1':{start:{line:2,column:20},end:{line:2,column:54}},'2':{start:{line:3,column:22},end:{line:3,column:58}},'3':{start:{line:4,column:23},end:{line:4,column:60}},'4':{start:{line:5,column:21},end:{line:5,column:56}},'5':{start:{line:6,column:21},end:{line:6,column:68}},'6':{start:{line:7,column:11},end:{line:7,column:33}},'7':{start:{line:8,column:13},end:{line:8,column:32}},'8':{start:{line:11,column:0},end:{line:186,column:2}},'9':{start:{line:13,column:4},end:{line:15,column:7}},'10':{start:{line:14,column:8},end:{line:14,column:28}},'11':{start:{line:17,column:4},end:{line:26,column:7}},'12':{start:{line:18,column:8},end:{line:25,column:11}},'13':{start:{line:21,column:12},end:{line:21,column:30}},'14':{start:{line:22,column:12},end:{line:22,column:33}},'15':{start:{line:23,column:12},end:{line:23,column:40}},'16':{start:{line:24,column:12},end:{line:24,column:28}},'17':{start:{line:29,column:4},end:{line:55,column:7}},'18':{start:{line:34,column:12},end:{line:53,column:15}},'19':{start:{line:37,column:16},end:{line:39,column:17}},'20':{start:{line:38,column:20},end:{line:38,column:37}},'21':{start:{line:40,column:16},end:{line:44,column:17}},'22':{start:{line:41,column:20},end:{line:43,column:23}},'23':{start:{line:45,column:16},end:{line:49,column:17}},'24':{start:{line:46,column:20},end:{line:48,column:23}},'25':{start:{line:50,column:16},end:{line:50,column:34}},'26':{start:{line:51,column:16},end:{line:51,column:44}},'27':{start:{line:52,column:16},end:{line:52,column:40}},'28':{start:{line:58,column:4},end:{line:86,column:7}},'29':{start:{line:64,column:12},end:{line:84,column:15}},'30':{start:{line:67,column:16},end:{line:69,column:17}},'31':{start:{line:68,column:20},end:{line:68,column:37}},'32':{start:{line:70,column:16},end:{line:83,column:17}},'33':{start:{line:71,column:20},end:{line:76,column:23}},'34':{start:{line:77,column:20},end:{line:80,column:23}},'35':{start:{line:78,column:24},end:{line:78,column:50}},'36':{start:{line:78,column:33},end:{line:78,column:50}},'37':{start:{line:79,column:24},end:{line:79,column:47}},'38':{start:{line:82,column:20},end:{line:82,column:43}},'39':{start:{line:89,column:4},end:{line:121,column:7}},'40':{start:{line:95,column:12},end:{line:119,column:15}},'41':{start:{line:98,column:16},end:{line:100,column:17}},'42':{start:{line:99,column:20},end:{line:99,column:37}},'43':{start:{line:101,column:16},end:{line:118,column:17}},'44':{start:{line:102,column:20},end:{line:102,column:41}},'45':{start:{line:103,column:20},end:{line:109,column:23}},'46':{start:{line:110,column:20},end:{line:114,column:23}},'47':{start:{line:111,column:24},end:{line:111,column:50}},'48':{start:{line:111,column:33},end:{line:111,column:50}},'49':{start:{line:112,column:24},end:{line:112,column:45}},'50':{start:{line:113,column:24},end:{line:113,column:47}},'51':{start:{line:116,column:20},end:{line:116,column:41}},'52':{start:{line:117,column:20},end:{line:117,column:43}},'53':{start:{line:124,column:4},end:{line:153,column:7}},'54':{start:{line:130,column:12},end:{line:151,column:15}},'55':{start:{line:133,column:16},end:{line:135,column:17}},'56':{start:{line:134,column:20},end:{line:134,column:37}},'57':{start:{line:136,column:16},end:{line:150,column:17}},'58':{start:{line:137,column:20},end:{line:143,column:23}},'59':{start:{line:144,column:20},end:{line:147,column:23}},'60':{start:{line:145,column:24},end:{line:145,column:50}},'61':{start:{line:145,column:33},end:{line:145,column:50}},'62':{start:{line:146,column:24},end:{line:146,column:47}},'63':{start:{line:149,column:20},end:{line:149,column:43}},'64':{start:{line:156,column:4},end:{line:185,column:7}},'65':{start:{line:162,column:12},end:{line:183,column:15}},'66':{start:{line:165,column:16},end:{line:167,column:17}},'67':{start:{line:166,column:20},end:{line:166,column:37}},'68':{start:{line:168,column:16},end:{line:182,column:17}},'69':{start:{line:169,column:20},end:{line:175,column:23}},'70':{start:{line:176,column:20},end:{line:179,column:23}},'71':{start:{line:177,column:24},end:{line:177,column:50}},'72':{start:{line:177,column:33},end:{line:177,column:50}},'73':{start:{line:178,column:24},end:{line:178,column:47}},'74':{start:{line:181,column:20},end:{line:181,column:43}}},fnMap:{'0':{name:'(anonymous_0)',decl:{start:{line:11,column:17},end:{line:11,column:18}},loc:{start:{line:11,column:36},end:{line:186,column:1}},line:11},'1':{name:'(anonymous_1)',decl:{start:{line:13,column:27},end:{line:13,column:28}},loc:{start:{line:13,column:48},end:{line:15,column:5}},line:13},'2':{name:'(anonymous_2)',decl:{start:{line:17,column:29},end:{line:17,column:30}},loc:{start:{line:17,column:48},end:{line:26,column:5}},line:17},'3':{name:'(anonymous_3)',decl:{start:{line:20,column:11},end:{line:20,column:12}},loc:{start:{line:20,column:31},end:{line:25,column:9}},line:20},'4':{name:'(anonymous_4)',decl:{start:{line:33,column:8},end:{line:33,column:9}},loc:{start:{line:33,column:40},end:{line:54,column:9}},line:33},'5':{name:'(anonymous_5)',decl:{start:{line:36,column:15},end:{line:36,column:16}},loc:{start:{line:36,column:35},end:{line:53,column:13}},line:36},'6':{name:'(anonymous_6)',decl:{start:{line:63,column:8},end:{line:63,column:9}},loc:{start:{line:63,column:52},end:{line:85,column:9}},line:63},'7':{name:'(anonymous_7)',decl:{start:{line:66,column:15},end:{line:66,column:16}},loc:{start:{line:66,column:35},end:{line:84,column:13}},line:66},'8':{name:'(anonymous_8)',decl:{start:{line:77,column:30},end:{line:77,column:31}},loc:{start:{line:77,column:44},end:{line:80,column:21}},line:77},'9':{name:'(anonymous_9)',decl:{start:{line:94,column:8},end:{line:94,column:9}},loc:{start:{line:94,column:59},end:{line:120,column:9}},line:94},'10':{name:'(anonymous_10)',decl:{start:{line:97,column:15},end:{line:97,column:16}},loc:{start:{line:97,column:35},end:{line:119,column:13}},line:97},'11':{name:'(anonymous_11)',decl:{start:{line:110,column:30},end:{line:110,column:31}},loc:{start:{line:110,column:44},end:{line:114,column:21}},line:110},'12':{name:'(anonymous_12)',decl:{start:{line:129,column:8},end:{line:129,column:9}},loc:{start:{line:129,column:59},end:{line:152,column:9}},line:129},'13':{name:'(anonymous_13)',decl:{start:{line:132,column:15},end:{line:132,column:16}},loc:{start:{line:132,column:35},end:{line:151,column:13}},line:132},'14':{name:'(anonymous_14)',decl:{start:{line:144,column:30},end:{line:144,column:31}},loc:{start:{line:144,column:44},end:{line:147,column:21}},line:144},'15':{name:'(anonymous_15)',decl:{start:{line:161,column:8},end:{line:161,column:9}},loc:{start:{line:161,column:59},end:{line:184,column:9}},line:161},'16':{name:'(anonymous_16)',decl:{start:{line:164,column:15},end:{line:164,column:16}},loc:{start:{line:164,column:35},end:{line:183,column:13}},line:164},'17':{name:'(anonymous_17)',decl:{start:{line:176,column:30},end:{line:176,column:31}},loc:{start:{line:176,column:44},end:{line:179,column:21}},line:176}},branchMap:{'0':{loc:{start:{line:37,column:16},end:{line:39,column:17}},type:'if',locations:[{start:{line:37,column:16},end:{line:39,column:17}},{start:{line:37,column:16},end:{line:39,column:17}}],line:37},'1':{loc:{start:{line:40,column:16},end:{line:44,column:17}},type:'if',locations:[{start:{line:40,column:16},end:{line:44,column:17}},{start:{line:40,column:16},end:{line:44,column:17}}],line:40},'2':{loc:{start:{line:45,column:16},end:{line:49,column:17}},type:'if',locations:[{start:{line:45,column:16},end:{line:49,column:17}},{start:{line:45,column:16},end:{line:49,column:17}}],line:45},'3':{loc:{start:{line:59,column:25},end:{line:59,column:84}},type:'binary-expr',locations:[{start:{line:59,column:25},end:{line:59,column:57}},{start:{line:59,column:61},end:{line:59,column:84}}],line:59},'4':{loc:{start:{line:60,column:28},end:{line:60,column:94}},type:'binary-expr',locations:[{start:{line:60,column:28},end:{line:60,column:63}},{start:{line:60,column:67},end:{line:60,column:94}}],line:60},'5':{loc:{start:{line:67,column:16},end:{line:69,column:17}},type:'if',locations:[{start:{line:67,column:16},end:{line:69,column:17}},{start:{line:67,column:16},end:{line:69,column:17}}],line:67},'6':{loc:{start:{line:70,column:16},end:{line:83,column:17}},type:'if',locations:[{start:{line:70,column:16},end:{line:83,column:17}},{start:{line:70,column:16},end:{line:83,column:17}}],line:70},'7':{loc:{start:{line:78,column:24},end:{line:78,column:50}},type:'if',locations:[{start:{line:78,column:24},end:{line:78,column:50}},{start:{line:78,column:24},end:{line:78,column:50}}],line:78},'8':{loc:{start:{line:90,column:22},end:{line:90,column:74}},type:'binary-expr',locations:[{start:{line:90,column:22},end:{line:90,column:46}},{start:{line:90,column:50},end:{line:90,column:74}}],line:90},'9':{loc:{start:{line:91,column:26},end:{line:91,column:86}},type:'binary-expr',locations:[{start:{line:91,column:26},end:{line:91,column:54}},{start:{line:91,column:58},end:{line:91,column:86}}],line:91},'10':{loc:{start:{line:98,column:16},end:{line:100,column:17}},type:'if',locations:[{start:{line:98,column:16},end:{line:100,column:17}},{start:{line:98,column:16},end:{line:100,column:17}}],line:98},'11':{loc:{start:{line:101,column:16},end:{line:118,column:17}},type:'if',locations:[{start:{line:101,column:16},end:{line:118,column:17}},{start:{line:101,column:16},end:{line:118,column:17}}],line:101},'12':{loc:{start:{line:105,column:31},end:{line:105,column:80}},type:'binary-expr',locations:[{start:{line:105,column:32},end:{line:105,column:46}},{start:{line:105,column:50},end:{line:105,column:73}},{start:{line:105,column:78},end:{line:105,column:80}}],line:105},'13':{loc:{start:{line:111,column:24},end:{line:111,column:50}},type:'if',locations:[{start:{line:111,column:24},end:{line:111,column:50}},{start:{line:111,column:24},end:{line:111,column:50}}],line:111},'14':{loc:{start:{line:125,column:22},end:{line:125,column:76}},type:'binary-expr',locations:[{start:{line:125,column:22},end:{line:125,column:50}},{start:{line:125,column:54},end:{line:125,column:76}}],line:125},'15':{loc:{start:{line:126,column:26},end:{line:126,column:88}},type:'binary-expr',locations:[{start:{line:126,column:26},end:{line:126,column:58}},{start:{line:126,column:62},end:{line:126,column:88}}],line:126},'16':{loc:{start:{line:133,column:16},end:{line:135,column:17}},type:'if',locations:[{start:{line:133,column:16},end:{line:135,column:17}},{start:{line:133,column:16},end:{line:135,column:17}}],line:133},'17':{loc:{start:{line:136,column:16},end:{line:150,column:17}},type:'if',locations:[{start:{line:136,column:16},end:{line:150,column:17}},{start:{line:136,column:16},end:{line:150,column:17}}],line:136},'18':{loc:{start:{line:145,column:24},end:{line:145,column:50}},type:'if',locations:[{start:{line:145,column:24},end:{line:145,column:50}},{start:{line:145,column:24},end:{line:145,column:50}}],line:145},'19':{loc:{start:{line:157,column:22},end:{line:157,column:76}},type:'binary-expr',locations:[{start:{line:157,column:22},end:{line:157,column:50}},{start:{line:157,column:54},end:{line:157,column:76}}],line:157},'20':{loc:{start:{line:158,column:26},end:{line:158,column:88}},type:'binary-expr',locations:[{start:{line:158,column:26},end:{line:158,column:58}},{start:{line:158,column:62},end:{line:158,column:88}}],line:158},'21':{loc:{start:{line:165,column:16},end:{line:167,column:17}},type:'if',locations:[{start:{line:165,column:16},end:{line:167,column:17}},{start:{line:165,column:16},end:{line:167,column:17}}],line:165},'22':{loc:{start:{line:168,column:16},end:{line:182,column:17}},type:'if',locations:[{start:{line:168,column:16},end:{line:182,column:17}},{start:{line:168,column:16},end:{line:182,column:17}}],line:168},'23':{loc:{start:{line:177,column:24},end:{line:177,column:50}},type:'if',locations:[{start:{line:177,column:24},end:{line:177,column:50}},{start:{line:177,column:24},end:{line:177,column:50}}],line:177}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0,'48':0,'49':0,'50':0,'51':0,'52':0,'53':0,'54':0,'55':0,'56':0,'57':0,'58':0,'59':0,'60':0,'61':0,'62':0,'63':0,'64':0,'65':0,'66':0,'67':0,'68':0,'69':0,'70':0,'71':0,'72':0,'73':0,'74':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0],'9':[0,0],'10':[0,0],'11':[0,0],'12':[0,0,0],'13':[0,0],'14':[0,0],'15':[0,0],'16':[0,0],'17':[0,0],'18':[0,0],'19':[0,0],'20':[0,0],'21':[0,0],'22':[0,0],'23':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var mongoose=(cov_1fl6jrtgkn.s[0]++,require('mongoose')),LocalStrategy=(cov_1fl6jrtgkn.s[1]++,require('passport-local').Strategy),TwitterStrategy=(cov_1fl6jrtgkn.s[2]++,require('passport-twitter').Strategy),FacebookStrategy=(cov_1fl6jrtgkn.s[3]++,require('passport-facebook').Strategy),GitHubStrategy=(cov_1fl6jrtgkn.s[4]++,require('passport-github').Strategy),GoogleStrategy=(cov_1fl6jrtgkn.s[5]++,require('passport-google-oauth').OAuth2Strategy),User=(cov_1fl6jrtgkn.s[6]++,mongoose.model('User')),config=(cov_1fl6jrtgkn.s[7]++,require('./config'));cov_1fl6jrtgkn.s[8]++;module.exports=function(passport){cov_1fl6jrtgkn.f[0]++;cov_1fl6jrtgkn.s[9]++;//Serialize sessions
passport.serializeUser(function(user,done){cov_1fl6jrtgkn.f[1]++;cov_1fl6jrtgkn.s[10]++;done(null,user.id);});cov_1fl6jrtgkn.s[11]++;passport.deserializeUser(function(id,done){cov_1fl6jrtgkn.f[2]++;cov_1fl6jrtgkn.s[12]++;User.findOne({_id:id},function(err,user){cov_1fl6jrtgkn.f[3]++;cov_1fl6jrtgkn.s[13]++;user.email=null;cov_1fl6jrtgkn.s[14]++;user.facebook=null;cov_1fl6jrtgkn.s[15]++;user.hashed_password=null;cov_1fl6jrtgkn.s[16]++;done(err,user);});});//Use local strategy
cov_1fl6jrtgkn.s[17]++;passport.use(new LocalStrategy({usernameField:'email',passwordField:'password'},function(email,password,done){cov_1fl6jrtgkn.f[4]++;cov_1fl6jrtgkn.s[18]++;User.findOne({email:email},function(err,user){cov_1fl6jrtgkn.f[5]++;cov_1fl6jrtgkn.s[19]++;if(err){cov_1fl6jrtgkn.b[0][0]++;cov_1fl6jrtgkn.s[20]++;return done(err);}else{cov_1fl6jrtgkn.b[0][1]++;}cov_1fl6jrtgkn.s[21]++;if(!user){cov_1fl6jrtgkn.b[1][0]++;cov_1fl6jrtgkn.s[22]++;return done(null,false,{message:'Unknown user'});}else{cov_1fl6jrtgkn.b[1][1]++;}cov_1fl6jrtgkn.s[23]++;if(!user.authenticate(password)){cov_1fl6jrtgkn.b[2][0]++;cov_1fl6jrtgkn.s[24]++;return done(null,false,{message:'Invalid password'});}else{cov_1fl6jrtgkn.b[2][1]++;}cov_1fl6jrtgkn.s[25]++;user.email=null;cov_1fl6jrtgkn.s[26]++;user.hashed_password=null;cov_1fl6jrtgkn.s[27]++;return done(null,user);});}));//Use twitter strategy
cov_1fl6jrtgkn.s[28]++;passport.use(new TwitterStrategy({consumerKey:(cov_1fl6jrtgkn.b[3][0]++,process.env.TWITTER_CONSUMER_KEY)||(cov_1fl6jrtgkn.b[3][1]++,config.twitter.clientID),consumerSecret:(cov_1fl6jrtgkn.b[4][0]++,process.env.TWITTER_CONSUMER_SECRET)||(cov_1fl6jrtgkn.b[4][1]++,config.twitter.clientSecret),callbackURL:config.twitter.callbackURL},function(token,tokenSecret,profile,done){cov_1fl6jrtgkn.f[6]++;cov_1fl6jrtgkn.s[29]++;User.findOne({'twitter.id_str':profile.id},function(err,user){cov_1fl6jrtgkn.f[7]++;cov_1fl6jrtgkn.s[30]++;if(err){cov_1fl6jrtgkn.b[5][0]++;cov_1fl6jrtgkn.s[31]++;return done(err);}else{cov_1fl6jrtgkn.b[5][1]++;}cov_1fl6jrtgkn.s[32]++;if(!user){cov_1fl6jrtgkn.b[6][0]++;cov_1fl6jrtgkn.s[33]++;user=new User({name:profile.displayName,username:profile.username,provider:'twitter',twitter:profile._json});cov_1fl6jrtgkn.s[34]++;user.save(function(err){cov_1fl6jrtgkn.f[8]++;cov_1fl6jrtgkn.s[35]++;if(err){cov_1fl6jrtgkn.b[7][0]++;cov_1fl6jrtgkn.s[36]++;console.log(err);}else{cov_1fl6jrtgkn.b[7][1]++;}cov_1fl6jrtgkn.s[37]++;return done(err,user);});}else{cov_1fl6jrtgkn.b[6][1]++;cov_1fl6jrtgkn.s[38]++;return done(err,user);}});}));//Use facebook strategy
cov_1fl6jrtgkn.s[39]++;passport.use(new FacebookStrategy({clientID:(cov_1fl6jrtgkn.b[8][0]++,process.env.FB_CLIENT_ID)||(cov_1fl6jrtgkn.b[8][1]++,config.facebook.clientID),clientSecret:(cov_1fl6jrtgkn.b[9][0]++,process.env.FB_CLIENT_SECRET)||(cov_1fl6jrtgkn.b[9][1]++,config.facebook.clientSecret),callbackURL:config.facebook.callbackURL},function(accessToken,refreshToken,profile,done){cov_1fl6jrtgkn.f[9]++;cov_1fl6jrtgkn.s[40]++;User.findOne({'facebook.id':profile.id},function(err,user){cov_1fl6jrtgkn.f[10]++;cov_1fl6jrtgkn.s[41]++;if(err){cov_1fl6jrtgkn.b[10][0]++;cov_1fl6jrtgkn.s[42]++;return done(err);}else{cov_1fl6jrtgkn.b[10][1]++;}cov_1fl6jrtgkn.s[43]++;if(!user){cov_1fl6jrtgkn.b[11][0]++;cov_1fl6jrtgkn.s[44]++;console.log(profile);cov_1fl6jrtgkn.s[45]++;user=new User({name:profile.displayName,email:(cov_1fl6jrtgkn.b[12][0]++,profile.emails)&&(cov_1fl6jrtgkn.b[12][1]++,profile.emails[0].value)||(cov_1fl6jrtgkn.b[12][2]++,''),username:profile.username,provider:'facebook',facebook:profile._json});cov_1fl6jrtgkn.s[46]++;user.save(function(err){cov_1fl6jrtgkn.f[11]++;cov_1fl6jrtgkn.s[47]++;if(err){cov_1fl6jrtgkn.b[13][0]++;cov_1fl6jrtgkn.s[48]++;console.log(err);}else{cov_1fl6jrtgkn.b[13][1]++;}cov_1fl6jrtgkn.s[49]++;user.facebook=null;cov_1fl6jrtgkn.s[50]++;return done(err,user);});}else{cov_1fl6jrtgkn.b[11][1]++;cov_1fl6jrtgkn.s[51]++;user.facebook=null;cov_1fl6jrtgkn.s[52]++;return done(err,user);}});}));//Use github strategy
cov_1fl6jrtgkn.s[53]++;passport.use(new GitHubStrategy({clientID:(cov_1fl6jrtgkn.b[14][0]++,process.env.GITHUB_CLIENT_ID)||(cov_1fl6jrtgkn.b[14][1]++,config.github.clientID),clientSecret:(cov_1fl6jrtgkn.b[15][0]++,process.env.GITHUB_CLIENT_SECRET)||(cov_1fl6jrtgkn.b[15][1]++,config.github.clientSecret),callbackURL:config.github.callbackURL},function(accessToken,refreshToken,profile,done){cov_1fl6jrtgkn.f[12]++;cov_1fl6jrtgkn.s[54]++;User.findOne({'github.id':profile.id},function(err,user){cov_1fl6jrtgkn.f[13]++;cov_1fl6jrtgkn.s[55]++;if(err){cov_1fl6jrtgkn.b[16][0]++;cov_1fl6jrtgkn.s[56]++;return done(err);}else{cov_1fl6jrtgkn.b[16][1]++;}cov_1fl6jrtgkn.s[57]++;if(!user){cov_1fl6jrtgkn.b[17][0]++;cov_1fl6jrtgkn.s[58]++;user=new User({name:profile.displayName,email:profile.emails[0].value,username:profile.username,provider:'github',github:profile._json});cov_1fl6jrtgkn.s[59]++;user.save(function(err){cov_1fl6jrtgkn.f[14]++;cov_1fl6jrtgkn.s[60]++;if(err){cov_1fl6jrtgkn.b[18][0]++;cov_1fl6jrtgkn.s[61]++;console.log(err);}else{cov_1fl6jrtgkn.b[18][1]++;}cov_1fl6jrtgkn.s[62]++;return done(err,user);});}else{cov_1fl6jrtgkn.b[17][1]++;cov_1fl6jrtgkn.s[63]++;return done(err,user);}});}));//Use google strategy
cov_1fl6jrtgkn.s[64]++;passport.use(new GoogleStrategy({clientID:(cov_1fl6jrtgkn.b[19][0]++,process.env.GOOGLE_CLIENT_ID)||(cov_1fl6jrtgkn.b[19][1]++,config.google.clientID),clientSecret:(cov_1fl6jrtgkn.b[20][0]++,process.env.GOOGLE_CLIENT_SECRET)||(cov_1fl6jrtgkn.b[20][1]++,config.google.clientSecret),callbackURL:config.google.callbackURL},function(accessToken,refreshToken,profile,done){cov_1fl6jrtgkn.f[15]++;cov_1fl6jrtgkn.s[65]++;User.findOne({'google.id':profile.id},function(err,user){cov_1fl6jrtgkn.f[16]++;cov_1fl6jrtgkn.s[66]++;if(err){cov_1fl6jrtgkn.b[21][0]++;cov_1fl6jrtgkn.s[67]++;return done(err);}else{cov_1fl6jrtgkn.b[21][1]++;}cov_1fl6jrtgkn.s[68]++;if(!user){cov_1fl6jrtgkn.b[22][0]++;cov_1fl6jrtgkn.s[69]++;user=new User({name:profile.displayName,email:profile.emails[0].value,username:profile.username,provider:'google',google:profile._json});cov_1fl6jrtgkn.s[70]++;user.save(function(err){cov_1fl6jrtgkn.f[17]++;cov_1fl6jrtgkn.s[71]++;if(err){cov_1fl6jrtgkn.b[23][0]++;cov_1fl6jrtgkn.s[72]++;console.log(err);}else{cov_1fl6jrtgkn.b[23][1]++;}cov_1fl6jrtgkn.s[73]++;return done(err,user);});}else{cov_1fl6jrtgkn.b[22][1]++;cov_1fl6jrtgkn.s[74]++;return done(err,user);}});}));};